!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=64)}([function(e,t,s){},function(e,t,s){var i={"./cave-background.png":2,"./cave-door.png":3,"./cave-enemy.png":4,"./cave-ground-overlay.png":5,"./cave-ground.png":6,"./cave-over.png":7,"./cave-player-1.png":8,"./cave-player-2.png":9,"./cave-player-bullet.png":10,"./cave-rock.png":11,"./cave.png":12,"./common-1.png":13,"./common-2.png":14,"./common-3.png":15,"./common-4.png":16,"./common-crystal.png":17,"./dark-1.png":18,"./dark-2.png":19,"./dark-3.png":20,"./dark-4.png":21,"./dark-orb.png":22,"./deep-background.png":23,"./enemy-bullet.png":24,"./favorite-heart-button.svg":25,"./fire-1.png":26,"./fire-2.png":27,"./fire-3.png":28,"./fire-4.png":29,"./fire-wand.png":30,"./fire3.png":31,"./flowers.png":32,"./health-bg.png":33,"./health-overlay.png":34,"./helmet.svg":35,"./ice-1.png":36,"./ice-2.png":37,"./ice-3.png":38,"./ice-4.png":39,"./ice-wand.png":40,"./jellyfish.png":41,"./player-1-portrait.png":42,"./player-2-portrait.png":43,"./player1.png":44,"./player2.png":45,"./rock.png":46,"./shield.svg":47,"./swords.svg":48,"./terra-1.png":49,"./terra-2.png":50,"./terra-3.png":51,"./terra-4.png":52,"./terra-stone.png":53,"./vudu-1.png":54,"./vudu-2.png":55,"./vudu-3.png":56,"./vudu-4.png":57,"./vudu-eye.png":58};function a(e){var t=h(e);return s(t)}function h(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=h,e.exports=a,a.id=1},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-background.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-door.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-enemy.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-ground-overlay.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-ground.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-over.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-player-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-player-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-player-bullet.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave-rock.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/cave.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/common-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/common-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/common-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/common-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/common-crystal.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/dark-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/dark-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/dark-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/dark-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/dark-orb.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/deep-background.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/enemy-bullet.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/favorite-heart-button.svg"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire-wand.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/fire3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/flowers.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/health-bg.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/health-overlay.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/helmet.svg"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/ice-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/ice-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/ice-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/ice-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/ice-wand.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/jellyfish.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/player-1-portrait.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/player-2-portrait.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/player1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/player2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/rock.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/shield.svg"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/swords.svg"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/terra-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/terra-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/terra-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/terra-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/terra-stone.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/vudu-1.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/vudu-2.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/vudu-3.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/vudu-4.png"},function(e,t,s){e.exports=s.p+"/src/assets/imgs/vudu-eye.png"},function(e,t,s){var i={"./darkling-by-kevin-macleod.mp3":60,"./lost-frontier-by-kevin-macleod.mp3":61,"./oppressive-gloom-by-kevin-macleod.mp3":62,"./showdown-by-kevin-macleod.mp3":63};function a(e){var t=h(e);return s(t)}function h(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=h,e.exports=a,a.id=59},function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:3)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:3)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:3)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(e,t){throw new Error("Module parse failed: Unexpected character '' (1:3)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(e,t,s){"use strict";s.r(t);s(0);class i{static removeTile(e,t,s){t.forEach((t,s)=>{t.x==e.x&&t.y==e.y&&e.splice(s,1)})}}class a{constructor(e,t,s,i){this.tileSize=e,this.height=s,this.width=t,this.boardSize=i}randomX(){return this.tileSize*Math.floor(Math.random()*(this.width/this.boardSize))}randomY(){return this.tileSize*Math.floor(Math.random()*(this.height/this.boardSize))}}class h{constructor(e,t){this.canvas=e,this.minWidth=50,this.maxWidth=100,this.height=t}randomX(){return Math.random()*this.canvas.width}randomY(){return Math.random()*this.canvas.height}randomWidth(){return Math.random()*(this.maxWidth-this.minWidth)+this.minWidth}}class r{constructor(e,t,s,i,a){this.x=e,this.y=t,this.tileWidth=s,this.tileHeight=i,this.color=a,this.lineWidth=1.5}draw(e){e.beginPath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.rect(this.x,this.y,this.tileWidth,this.tileHeight),e.closePath(),e.stroke()}}class l extends r{constructor(e,t,s,i){super(e,t,s,i),this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.tileHeight,this.tileWidth),this.img.src="/src/assets/imgs/jellyfish.png"}}class n extends r{constructor(e,t,s,i,a){super(e,t,s,i,a),this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.tileHeight,this.tileWidth),this.img.src="/src/assets/imgs/rock.png"}}class o extends r{constructor(e,t,s,i,a){super(e,t,s,i,a),this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.tileHeight,this.tileWidth),this.img.src="/src/assets/imgs/flowers.png"}}class p extends r{constructor(e,t,s,i,a){super(e,t,s,i,a),this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.tileHeight,this.tileWidth),this.img.src="/src/assets/imgs/cave.png"}}class c{constructor(e,t,s,i,a,h){this.rocks=a,this.trees=h,this.turn=!0,this.canvas=i,this.tileSize=s,this.posX=e,this.posY=t,this.newPosX=this.posX,this.newPosY=this.posY,this.dx=this.tileSize,this.dy=this.tileSize}move(){window.onkeyup=(e=>{switch(e.keyCode?e.keyCode:e.which){case 65:this.collideLeft(this.rocks),this.collideLeft(this.trees),this.posX-=this.dx,this.posX!=this.newPosX-2*this.tileSize&&this.posY==this.newPosY&&this.posX!=this.newPosX+2*this.tileSize&&(this.dx=this.tileSize),this.posX<this.newPosX&&(this.dy=0),this.posX<this.newPosX-2*this.tileSize&&(this.dx=0),this.posX>this.newPosX+2*this.tileSize&&(this.posX+=-this.tileSize);break;case 87:this.collideBottom(this.rocks),this.collideBottom(this.trees),this.posY-=this.dy,this.posY!=this.newPosY-2*this.tileSize&&this.posX==this.newPosX&&(this.dy=this.tileSize),this.posY<this.newPosY-2*this.tileSize&&(this.dy=0),this.posY<this.newPosY&&(this.dx=0),this.posY>this.newPosY+2*this.tileSize&&(this.posY+=-this.tileSize);break;case 68:this.collideRight(this.rocks),this.collideRight(this.trees),this.posX+=this.dx,this.posX!=this.newPosX+2*this.tileSize&&this.posY==this.newPosY&&(this.dx=this.tileSize),this.posX>this.newPosX&&(this.dy=0),this.posX==this.newPosX+this.tileSize&&(this.dy=0),this.posX>this.newPosX+2*this.tileSize&&(this.dx=0),this.posX<this.newPosX-2*this.tileSize&&(this.posX+=this.tileSize);break;case 83:this.collideTop(this.rocks),this.collideTop(this.trees),this.posY+=this.dy,this.posY!=this.newPosY+2*this.tileSize&&this.posX==this.newPosX&&(this.dy=this.tileSize),this.posY>this.newPosY+2*this.tileSize&&(this.dy=0),this.posY>this.newPosY&&(this.dx=0),this.posY<this.newPosY-2*this.tileSize&&(this.posY+=this.tileSize)}}),this.posX<0&&(this.posX=0),this.posY<0&&(this.posY=0),this.posX+this.tileSize>this.canvas.width&&(this.posX=this.canvas.width-this.tileSize),this.posY+this.tileSize>this.canvas.height&&(this.posY=this.canvas.height-this.tileSize)}collideRight(e){e.forEach(e=>{e.x-this.tileSize==this.posX&&e.y==this.posY&&(this.dx=0)})}collideLeft(e){e.forEach(e=>{e.x+this.tileSize==this.posX&&e.y==this.posY&&(this.dx=0)})}collideTop(e){e.forEach(e=>{e.y-this.tileSize==this.posY&&e.x==this.posX&&(this.dy=0)})}collideBottom(e){e.forEach(e=>{e.y+this.tileSize==this.posY&&e.x==this.posX&&(this.dy=0)})}}class d{constructor(e,t){this.canvas=e,this.left=!1,this.right=!1,this.up=!1,this.jump=!1,this.down=!1,this.keyDown=0,this.playerY=t}move(){window.addEventListener("keydown",e=>{switch(e.keyCode?e.keyCode:e.which){case 68:this.right=!0;break;case 65:this.left=!0;break;case 32:this.keyDown++,this.jump=!0,setTimeout(()=>{this.jump=!1},150),1==this.keyDown?this.jump=!0:this.jump=!1;break;case 83:this.down=!0;break;case 87:this.up=!0}}),window.addEventListener("keyup",e=>{switch(e.keyCode?e.keyCode:e.which){case 68:this.right=!1;break;case 65:this.left=!1;break;case 32:this.jump=!1,this.keyDown=0;break;case 83:this.down=!1;break;case 87:this.up=!1}})}}class y{constructor(e,t,s,i,a,h,r,l){this.color=a,this.tileSize=t,this.spawnX=s*this.tileSize,this.spawnY=i,this.canvas=e,this.playerX=this.spawnX,this.playerY=this.spawnY,this.p1turn=!0,this.img=new Image,this.lineWidth=2.5,this.lineColor=l,this.controller=new c(this.playerX,this.playerY,this.tileSize,this.canvas,h,r)}drawMoves(e){e.beginPath(),e.rect(this.playerX,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX+this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX+2*this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX+3*this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX-this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX-2*this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX-3*this.tileSize,this.playerY,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY-this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY-2*this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY-3*this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY+this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY+2*this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.beginPath(),e.rect(this.playerX,this.playerY+3*this.tileSize,this.tileSize,this.tileSize),e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.stroke(),e.closePath()}draw(e){e.drawImage(this.img,this.controller.posX,this.controller.posY,this.tileSize,this.tileSize),this.img.src=this.color}move(){window.onkeydown=(e=>{switch(e.keyCode?e.keyCode:e.which){case 13:this.playerX=this.controller.posX,this.playerY=this.controller.posY,this.controller.newPosX=this.controller.posX,this.controller.newPosY=this.controller.posY,this.controller.turn=!this.controller.turn,this.controller.dy=this.tileSize,this.controller.dx=this.tileSize,this.p1turn=!this.p1turn}}),this.playerPosX=this.controller.posX,this.playerPosY=this.controller.posY,this.playerDx=this.controller.dx,this.playerDy=this.controller.dy,this.controller.move()}turn(){return this.controller.turn}}class m{constructor(e){this.canvas=e,this.height=this.canvas.height,this.width=this.canvas.width,this.boardSize=e.width/12,this.tileSize=this.boardSize,this.tileX=-this.tileSize,this.tileY=-this.tileSize,this.numRocks=5,this.numTrees=7,this.numFlowers=6,this.numCaves=4,this.tiles=[],this.trees=[],this.rocks=[],this.caves=[],this.flowers=[],this.playerCombat=!1,this.random=new a(this.tileSize,this.width,this.height,this.boardSize),this.player1=new y(this.canvas,this.tileSize,0,this.random.randomY(),"/src/assets/imgs/player1.png",this.rocks,this.trees,"#CBFEFB"),this.player2=new y(this.canvas,this.tileSize,11,this.random.randomY(),"/src/assets/imgs/player2.png",this.rocks,this.trees,"#F1C6FF")}drawTile(e,t){e.forEach((s,i)=>{s.draw(t),(s.x==this.player1.spawnX&&s.y==this.player1.spawnY||s.x==this.player2.spawnX&&s.y==this.player2.spawnY)&&e.splice(i,1)})}draw(e){this.tiles.forEach(t=>{t.draw(e)}),this.drawTile(this.flowers,e),this.drawTile(this.caves,e),this.drawTile(this.rocks,e),this.drawTile(this.trees,e),i.removeTile(this.flowers,this.rocks,e),i.removeTile(this.flowers,this.caves,e),i.removeTile(this.flowers,this.trees,e),i.removeTile(this.caves,this.trees,e),i.removeTile(this.caves,this.rocks,e),i.removeTile(this.caves,this.flowers,e),i.removeTile(this.rocks,this.trees,e),i.removeTile(this.rocks,this.caves,e),i.removeTile(this.rocks,this.flowers,e),i.removeTile(this.trees,this.rocks,e),i.removeTile(this.trees,this.caves,e),i.removeTile(this.trees,this.flowers,e),this.player1.draw(e),this.player2.draw(e),this.drawPlayerMoves(e)}update(){this.playerTurn(),this.combat()}playerTurn(){1==this.player1.turn()&&1==this.player2.turn()?this.player1.move():0==this.player1.turn()&&1==this.player2.turn()?this.player2.move():0==this.player1.turn()&&0==this.player2.turn()?this.player1.move():1==this.player1.turn()&&0==this.player2.turn()&&this.player2.move()}drawPlayerMoves(e){1==this.player1.turn()&&1==this.player2.turn()?this.player1.drawMoves(e):0==this.player1.turn()&&1==this.player2.turn()?this.player2.drawMoves(e):0==this.player1.turn()&&0==this.player2.turn()?this.player1.drawMoves(e):1==this.player1.turn()&&0==this.player2.turn()&&this.player2.drawMoves(e)}genTrees(e){for(let e=0;e<this.numTrees;e++)this.trees.push(new l(this.random.randomX(),this.random.randomY(),this.tileSize,this.tileSize))}genFlowers(e){for(let e=0;e<this.numFlowers;e++)this.flowers.push(new o(this.random.randomX(),this.random.randomY(),this.tileSize,this.tileSize,"#567d46"))}genRocks(e){for(let e=0;e<this.numRocks;e++)this.rocks.push(new n(this.random.randomX(),this.random.randomY(),this.tileSize,this.tileSize,"#aaa79f"))}genCaves(e){for(let e=0;e<this.numCaves;e++)this.caves.push(new p(this.random.randomX(),this.random.randomY(),this.tileSize,this.tileSize,"#372c2c"))}genGrid(e){for(let e=0;e<this.canvas.width/this.tileSize;e++){this.tileY=-this.tileSize,this.tileX+=this.tileSize;for(let e=0;e<this.canvas.height/this.tileSize;e++)this.tileY+=this.tileSize,this.tiles.push(new r(this.tileX,this.tileY,this.tileSize,this.tileSize,"#002103"))}}combat(){(this.player1.playerX==this.player2.playerX-this.tileSize&&this.player1.playerY==this.player2.playerPosY||this.player1.playerX==this.player2.playerX+this.tileSize&&this.player1.playerY==this.player2.playerY||this.player1.playerY==this.player2.playerY-this.tileSize&&this.player1.playerX==this.player2.playerX||this.player1.playerY==this.player2.playerY+this.tileSize&&this.player1.playerX==this.player2.playerX||this.player1.playerX==this.player2.playerX&&this.player1.playerY==this.player2.playerY)&&(this.playerCombat=!0)}}class g{constructor(e,t,s,i,a,h,r,l,n){this.canvas=i,this.wandColor=r,this.wandSpeed=n,this.wandSize=l,this.playerSize=s,this.spawnX=a,this.spawnY=h,this.x=e,this.y=t,this.img=new Image,this.velocity={x:10,y:10}}draw(e){e.drawImage(this.img,this.x+this.playerSize/2-this.wandSize/2,this.y+this.playerSize/2-this.wandSize/2,this.wandSize,this.wandSize),this.img.src="/src/assets/imgs/cave-player-bullet.png"}fire(e,t){this.mouseX=e,this.mouseY=t,this.vectorX=this.mouseX-this.x,this.vectorY=this.mouseY-this.y,this.distance=Math.sqrt(this.vectorX*this.vectorX+this.vectorY*this.vectorY),this.dx=this.vectorX/this.distance,this.dy=this.vectorY/this.distance,this.dx*=this.wandSpeed,this.dy*=this.wandSpeed}update(e){this.x+=this.dx,this.y+=this.dy}}class u{constructor(e,t,s,i,a){this.canvas=s,this.width=i,this.height=a,this.bulletSize=15,this.x=e+this.width/2-this.bulletSize/2,this.y=t+this.height/2-this.bulletSize/2,this.speed=2.5,this.damage=3,this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.bulletSize,this.bulletSize),this.img.src="/src/assets/imgs/enemy-bullet.png"}fire(e,t){this.playerX=e,this.playerY=t,this.vectorX=this.playerX-this.x,this.vectorY=this.playerY-this.y,this.distance=Math.sqrt(this.vectorX*this.vectorX+this.vectorY*this.vectorY),this.dx=this.vectorX/this.distance,this.dy=this.vectorY/this.distance,this.dx*=this.speed,this.dy*=this.speed}update(e){this.x+=this.dx,this.y+=this.dy}}class v{constructor(e,t,s,i,a){this.caveRocks=s,this.caveGround=t,this.canvas=e,this.width=30,this.height=30,this.x=50,this.y=-100,this.gravity=1.5,this.friction=.8,this.velocity={x:7,y:3},this.bullets=[],this.controller=new d(this.canvas,this.newPosY),this.rect=e.getBoundingClientRect(),this.explode=500,this.ticker=0,this.health=500,this.dead=!1,this.gotWand=!1,this.wand=i,this.playerAttack=this.wand.attack,this.playerImage=a,this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),this.img.src=this.playerImage,this.bullets.forEach(t=>{t.draw(e)})}move(){0==this.dead&&this.controller.move()}update(e){this.bounds(e),this.collide(e),this.attack(e),this.bullets.forEach(t=>{t.update(e)}),0==this.dead&&(1==this.controller.right&&(this.x+=this.velocity.x),1==this.controller.left&&(this.x+=-this.velocity.x),1==this.controller.jump&&this.y>0&&(this.velocity.y=-10*this.friction,this.y+=this.velocity.y),this.y+=this.velocity.y)}collide(e){this.caveRocks.forEach(e=>{this.y+this.height+this.velocity.y>=e.randY&&this.y+this.height+this.velocity.y<=e.randY+this.velocity.y&&this.x+this.height>=e.randX&&this.x<=e.randX+e.width&&(this.velocity.y=0),1==this.controller.jump&&this.y+this.velocity.y<=e.randY+e.height&&this.y+this.velocity.y>=e.randY&&this.x+this.height>=e.randX&&this.x<=e.randX+e.width&&(this.velocity.y=27*this.friction,this.y+=this.velocity.y)})}bounds(e){this.x+this.width>=this.canvas.width&&1==this.controller.right||this.x<=0&&1==this.controller.left?this.velocity.x=0:this.velocity.x=7,this.y+this.height+this.velocity.y>=this.caveGround.height?this.velocity.y=0:this.velocity.y+=this.gravity}attack(e){window.addEventListener("mousedown",e=>{this.ticker++,1==this.ticker&&0==this.dead&&this.spawnBullet(e)})}spawnBullet(e){this.bullets.push(new g(this.x,this.y,this.height,this.canvas,this.x,this.y,this.wand.color,this.wand.size,this.wand.speed)),this.bullets.forEach(t=>{this.mouseX=e.pageX-this.rect.left,this.mouseY=e.pageY-this.rect.top,t.spawnX=this.x,t.spawnY=this.y,t.fire(this.mouseX,this.mouseY)}),setTimeout(()=>{this.ticker=0,this.bullets.forEach(e=>{this.bullets.splice(e,1)})},this.explode)}}class w{constructor(e,t,s){this.canvas=s,this.caveGround=e,this.player=t,this.health=500,this.attack=50,this.speed=5,this.height=100,this.width=120,this.x=this.canvas.width-200,this.y=this.caveGround.height-this.height,this.initX=2,this.initY=2,this.enemyBullets=[],this.explode=5e3,this.img=new Image,this.dead=!1,this.velocity={x:this.initX,y:this.initY},setInterval(()=>{this.randNum=Math.floor(3*Math.random()+1)},1e3),setInterval(()=>{this.enemyBullets.push(new u(this.x,this.y,this.canvas,this.width,this.height))},3e3)}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),this.img.src="/src/assets/imgs/cave-enemy.png",this.enemyBullets.forEach(t=>{t.draw(e)})}update(e){this.move(),this.enemyBullets.forEach(e=>{e.update()})}moveLeft(){this.collide(),this.x+=-this.velocity.x}moveRight(){this.collide(),this.x+=this.velocity.x}moveStop(){this.collide(),this.velocity.x=0}move(){switch(this.randMove=this.randNum,this.randMove){case 1:this.moveLeft();break;case 2:this.moveRight();break;case 3:this.moveStop()}}collide(){this.x+this.width>=this.canvas.width||this.x<=0?this.velocity.x=0:this.velocity.x=this.speed,this.x<=0&&2==this.randNum?this.velocity.x=this.speed:this.x<=0&&this.randNum,this.x+this.width>=this.canvas.width&&1==this.randNum?this.velocity.x=this.speed:this.x+this.width>=this.canvas.width&&4==this.randNum&&(this.velocity.x=5),this.player.y+this.player.height>=this.y&&this.player.x>=this.x&&this.player.x+this.player.width/2<=this.x+this.width&&(this.player.velocity.y=-20,this.player.health-=50),this.player.x+this.player.width/2>=this.x&&this.player.x+this.player.width/2<=this.x+this.width&&this.player.y>=this.y&&(this.player.x+=-this.player.velocity.x+2*-this.velocity.x,this.player.health-=10),this.player.x+this.player.width>=this.x+this.width&&this.player.x+2<=this.x+this.width&&this.player.y>=this.y&&(this.player.x+=this.player.velocity.x+2*this.velocity.x,this.player.health-=10)}spawnBullet(e){this.enemyBullets.forEach(e=>{e.fire(this.player.x,this.player.y),this.enemyBullets.length>3&&(e.bulletSize+=-.1,e.bulletSize<=1&&this.enemyBullets.splice(e,4))})}}class f{constructor(e){this.canvas=e,this.height=this.canvas.height-50,this.thickness=50,this.img=new Image}draw(e){e.drawImage(this.img,0,this.height,this.canvas.width,this.thickness),this.img.src="/src/assets/imgs/cave-ground.png"}}class x{constructor(e,t,s){this.randX=e,this.randY=t,this.width=70,this.height=30,this.img=new Image}draw(e){e.drawImage(this.img,this.randX,this.randY,this.width,this.height),this.img.src="/src/assets/imgs/cave-rock.png"}}class k{constructor(e,t){this.spawnX=e,this.spawnY=t,this.name="Common Crystal",this.wandImg="/src/assets/imgs/common-crystal.png",this.speed=20,this.attack=10,this.lifeSteal=0,this.size=20,this.slow=0,this.burn=0,this.curse=0,this.defense=5,this.health=500,this.img=new Image,this.spells={first:{name:"Swift Attack",img:"/src/assets/imgs/common-1.png",desc:"Channel your inner speed and deal 50 DMG to your opponent in a swift blow",dmg:50},second:{name:"Fury",img:"/src/assets/imgs/common-2.png",desc:"Become enraged and deal 100 DMG in a furious assault",dmg:100},third:{name:"Damacia",img:"/src/assets/imgs/common-3.png",desc:"Channel Garen's wrath, god of Runeterra, gaining 10 armor",dmg:10},fourth:{name:"Ambush",img:"/src/assets/imgs/common-4.png",desc:"Strike your enemy from the shadows stealing 100 HP",dmg:100}}}randWand(){switch(this.randNum=Math.floor(5*Math.random()+1),this.randNum){case 1:this.name="Firn Shard",this.wandImg="/src/assets/imgs/ice-wand.png",this.attack=15,this.size=20,this.defense=10,this.spells={first:{name:"Frost Breath",img:"/src/assets/imgs/ice-1.png",desc:"Channel the ice coarsing through your veins and exhale a freezing breath, dealing 75 DMG",dmg:75},second:{name:"Avalanche",img:"/src/assets/imgs/ice-2.png",desc:"Summon an avalanche upon your enemy, dealing 150 DMG",dmg:150},third:{name:"Ice Armor",img:"/src/assets/imgs/ice-3.png",desc:"The air around you freezes into rock hard ice crystals, granting you 20 ARMOR",dmg:20},fourth:{name:"Frost Eater",img:"/src/assets/imgs/ice-4.png",desc:"strike your opponent with frostbite, stealing 75 HP",dmg:75}};break;case 2:this.name="Pyros Ember",this.wandImg="/src/assets/imgs/fire-wand.png",this.speed=20,this.size=20,this.attack=30,this.spells={first:{name:"Magma Storm",img:"/src/assets/imgs/fire-1.png",desc:"Staring deep within the Pyros Orb, you summon a blazing whirlwind of magma, dealing 120 DMG",dmg:120},second:{name:"Solar Flare",img:"/src/assets/imgs/fire-2.png",desc:"Tap into the arcane power of the Sun, dealing 175 DMG to your enemy",dmg:175},third:{name:"Lava Plumage",img:"/src/assets/imgs/fire-3.png",desc:"Blinding plumes of flame begin to envelope you, burning anything that comes near. Gain 25 ARMOR",dmg:25},fourth:{name:"Fire Tendrils",img:"/src/assets/imgs/fire-4.png",desc:"Summon deadly fire tendrils that suck the life out of your enemy, allowing you to recover 50 HP",dmg:50}};break;case 3:this.name="Vudos Eye",this.wandImg="/src/assets/imgs/vudu-eye.png",this.size=30,this.attack=20,this.health=750,this.spells={first:{name:"Death Curse",img:"/src/assets/imgs/vudu-1.png",desc:"If your enemy is below 100 HP, cast the curse of the dead, executing him",dmg:100},second:{name:"Soul Eater",img:"/src/assets/imgs/vudu-2.png",desc:"Feast upon the tormented soul of your opponent, dealing 120 DMG",dmg:120},third:{name:"Armor of Loa",img:"/src/assets/imgs/vudu-3.png",desc:"The Loa or spirits, come to your aid, surrounding you and granting you 40 ARMOR.",dmg:40},fourth:{name:"Juju",img:"/src/assets/imgs/vudu-4.png",desc:"The mystical power of Juju...",dmg:300}};break;case 4:this.name="Terra Stone",this.wandImg="/src/assets/imgs/terra-stone.png",this.size=25,this.attack=20,this.health=1e3,this.spells={first:{name:"Quake",img:"/src/assets/imgs/terra-1.png",desc:"Stomp the ground with your mighty feet, causing an earthquake to deal 50 DMG to your enemy",dmg:50},second:{name:"Fissure",img:"/src/assets/imgs/terra-2.png",desc:"Split the earth between your opponents feet in two, swallowing them whole and dealing 100 DMG",dmg:100},third:{name:"Stone Shield",img:"/src/assets/imgs/terra-3.png",desc:"The earth around you begins to tremble as stones assemble to create a powerful shield, giving you 30 ARMOR",dmg:30},fourth:{name:"Overgrowth",img:"/src/assets/imgs/terra-4.png",desc:"Cause roots to take hold of your enemy, draining 250 HP",dmg:250}};break;case 5:this.name="Disaris Orb",this.wandImg="/src/assets/imgs/dark-orb.png",this.size=20,this.attack=50,this.health=300,this.defense=0,this.spells={first:{name:"Dream Eater",img:"/src/assets/imgs/dark-1.png",desc:"Put your enemy into a deep sleep, feeding on their nightmares and dealing 150 DMG",dmg:150},second:{name:"Soul Rip",img:"/src/assets/imgs/dark-2.png",desc:"Tear a fragment of your enemy's soul, dealing 250 DMG",dmg:250},third:{name:"Ombre Vest",img:"/src/assets/imgs/dark-3.png",desc:"Channel the Shadow Realm, creating a vest of shadow energy and ganing 15 ARMOR",dmg:15},fourth:{name:"Shadow Man",img:"/src/assets/imgs/dark-4.png",desc:"Enter the shadow realm, feasting on your opponent's shadow, recovering 50 HP",dmg:50}}}return this.randNum}draw(e){e.drawImage(this.img,this.spawnX,this.spawnY,this.size,this.size),this.img.src=this.wandImg}}class S{constructor(e,t,s,i,a){this.x=e,this.y=t,this.height=a,this.width=i,this.color=s}draw(e){e.beginPath(),e.fillStyle=this.color,e.fillRect(this.x,this.y,this.width,this.height),e.fill(),e.closePath()}}class P{constructor(e,t){this.x=e,this.y=t,this.width=50,this.height=70,this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),this.img.src="/src/assets/imgs/cave-door.png"}}class b{constructor(e){this.canvas=e,this.height=this.canvas.height-100,this.thickness=100,this.img=new Image}draw(e){e.drawImage(this.img,0,this.height,this.canvas.width,this.thickness),this.img.src="/src/assets/imgs/cave-ground-overlay.png"}}class z{constructor(e,t,s,i){this.x=e,this.y=t,this.height=i,this.width=s,this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),this.img.src="/src/assets/imgs/health-overlay.png"}}class Y{constructor(e,t,s,i){this.x=e,this.y=t,this.height=i,this.width=s,this.img=new Image}draw(e){e.drawImage(this.img,this.x,this.y,this.width,this.height),this.img.src="/src/assets/imgs/health-bg.png"}}class X{constructor(e,t,s,i){this.playerImage=i,this.canvas=s,this.mapPlayer1=e,this.mapPlayer2=t,this.randomRock=new h(this.canvas,30),this.caveGround=new f(this.canvas),this.caveGroundOver=new b(this.canvas),this.caveRocks=[],this.caveEnemies=[],this.wand=new k(this.canvas.width-80,this.canvas.height-80),this.newWand,this.spawnedWand,this.cavePlayer1=new v(this.canvas,this.caveGround,this.caveRocks,this.wand,this.playerImage),this.numRocks=15,this.spawnWand=!1,this.pickedWand=!1,this.enemyDead=!1,this.healthBar=new S((this.canvas.width-500)/2,20,"#EAD9FF",500,30),this.healthBg=new Y((this.canvas.width-500)/2,20,500,30),this.healthOver=new z((this.canvas.width-540)/2,20,540,30),this.playerHealthBar=new S((this.canvas.width-this.cavePlayer1.health)/2,this.caveGround.height+this.caveGround.thickness/2-5,"#ffffff",500,20),this.playerHealthBg=new Y((this.canvas.width-this.cavePlayer1.health)/2,this.caveGround.height+this.caveGround.thickness/2-5,500,20),this.playerHealthOver=new z((this.canvas.width-(this.cavePlayer1.health+40))/2,this.caveGround.height+this.caveGround.thickness/2-5,540,20),this.quit=!1}removeRocks(){this.caveRocks.forEach((e,t)=>{(e.randX+e.width>this.canvas.width||e.randY+e.height<0+3*e.height||e.randY>this.canvas.height-4*e.height)&&this.caveRocks.splice(t,1)})}init(){$(".container").fadeTo(2e3,0),$("#cave").css("opacity",1),$(".cave-container").css("opacity",1),this.cavePlayer1.move(),this.genRocks(),this.caveEnemies.push(new w(this.caveGround,this.cavePlayer1,this.canvas))}draw(e){this.canvas.style.backgroundImage="url('/src/assets/imgs/cave-background.png')",this.removeRocks(),1==this.pickedWand&&this.wand.draw(e),this.caveRocks.forEach(t=>{t.draw(e)}),this.caveEnemies.forEach(t=>{t.draw(e)}),this.healthBg.draw(e),this.healthBar.draw(e),this.healthOver.draw(e),this.caveGround.draw(e),0==this.caveEnemies.length&&(this.newWand.draw(e),this.spawnedWand.draw(e),this.caveDoor.draw(e)),this.caveDoor.draw(e),this.cavePlayer1.draw(e),this.caveGroundOver.draw(e),this.playerHealthBg.draw(e),this.playerHealthBar.draw(e),this.playerHealthOver.draw(e)}update(e){this.mapPlayer1.controller.dx=0,this.mapPlayer1.controller.dy=0,this.mapPlayer2.controller.dx=0,this.mapPlayer2.controller.dy=0,this.cavePlayer1.update(e),this.caveEnemies.forEach(t=>{t.spawnBullet(e),t.update(e)}),this.killEnemy(e),this.killPlayer(e),0==this.caveEnemies.length&&this.exitCave(e),this.playerHealthBar.width=this.cavePlayer1.health}genRocks(){for(let e=0;e<this.numRocks;e++)this.caveRocks.push(new x(this.randomRock.randomX(),this.randomRock.randomY(),this.randomRock.randomWidth()))}killEnemy(){this.cavePlayer1.bullets.forEach(e=>{this.caveEnemies.forEach(t=>{e.x>=t.x&&e.x<=t.x+t.width-e.wandSize&&e.y>=t.y&&(t.health-=300,this.cavePlayer1.bullets.splice(e,1),this.healthBar.width-=this.cavePlayer1.playerAttack,t.health<=0&&(this.enemyDead=!0,this.caveEnemies.splice(t,1)))})}),this.genWand(),this.caveDoor=new P(30,this.canvas.height-this.caveGround.thickness-70)}killPlayer(){this.caveEnemies.forEach(e=>{e.enemyBullets.forEach(e=>{e.y<=this.cavePlayer1.y+this.cavePlayer1.height&&e.y+e.bulletSize>=this.cavePlayer1.y&&e.x+e.bulletSize>=this.cavePlayer1.x&&e.x<=this.cavePlayer1.x+this.cavePlayer1.width&&(this.cavePlayer1.health-=e.damage)})}),this.cavePlayer1.health<=0&&(setTimeout(()=>{$("#message").text("YOU HAVE MET YOUR DEMISE..."),this.quit=!0},1e3),this.cavePlayer1.health=0,this.cavePlayer1.dead=!0)}genWand(){this.caveEnemies.length<=0&&0==this.spawnWand&&(this.newWand=new k,this.newWand.randWand(),this.spawnedWand=new k,Object.assign(this.spawnedWand,this.newWand),this.spawnedWand.spawnX=this.canvas.width-100,this.spawnedWand.spawnY=this.canvas.width-80-this.spawnedWand.size/2,this.spawnWand=!0),this.caveEnemies.length<=0&&1==this.spawnWand&&this.acquireWand()}acquireWand(e){this.cavePlayer1.x+this.cavePlayer1.width>=this.spawnedWand.spawnX&&this.cavePlayer1.x<=this.spawnedWand.spawnX+this.spawnedWand.size&&this.cavePlayer1.y>=this.spawnedWand.spawnY&&this.cavePlayer1.y<=this.spawnedWand.spawnY+this.spawnedWand.size||this.cavePlayer1.x+this.cavePlayer1.width>=this.spawnedWand.spawnX+this.spawnedWand.size&&this.cavePlayer1.x<=this.spawnedWand.spawnX+this.spawnedWand.size&&this.cavePlayer1.y>=this.spawnedWand.spawnY&&this.cavePlayer1.y<=this.spawnedWand.spawnY+this.spawnedWand.size?(this.cavePlayer1.gotWand=!0,this.cavePlayer1.wand=this.newWand,this.spawnedWand.size=0,this.wand.spawnX=this.canvas.width-100,this.wand.spawnY=this.canvas.width-80-this.wand.size/2,this.pickedWand=!0):this.cavePlayer1.gotWand=!1}exitCave(){this.cavePlayer1.x+this.cavePlayer1.width<=this.caveDoor.x+this.caveDoor.width&&1==this.cavePlayer1.controller.up&&this.cavePlayer1.y>=this.caveDoor.y&&setTimeout(()=>{$("#message").text("YOU'VE SLAIN THE BEAST"),this.quit=!0},1e3)}}class W{constructor(){this.player1={hp:parseInt($("#player-1-health").text()),attack:parseInt($("#player-1-attack").text()),armor:parseInt($("#player-1-armor").text()),spell1:parseInt($(".stat-1-1").text()),spell2:parseInt($(".stat-1-2").text()),spell3:parseInt($(".stat-1-3").text()),spell4:parseInt($(".stat-1-4").text())},this.player2={hp:parseInt($("#player-2-health").text()),attack:parseInt($("#player-2-attack").text()),armor:parseInt($("#player-2-armor").text()),spell1:parseInt($(".stat-2-1").text()),spell2:parseInt($(".stat-2-2").text()),spell3:parseInt($(".stat-2-3").text()),spell4:parseInt($(".stat-2-4").text())},this.player1Defend=!1,this.player2Defend=!1,this.player1Turn=!0,this.player2Turn=!1,this.deathAudio=new Audio("/src/assets/audio/lost-frontier-by-kevin-macleod.mp3"),$(".player-2").addClass("disabled")}player1Attack(){1==this.player2Defend?(this.player2.hp-=this.player1.attack/2,$("#player-2-health").text(this.player2.hp)):(this.player2.hp-=this.player1.attack,$("#player-2-health").text(this.player2.hp))}player2Attack(){1==this.player1Defend?(this.player1.hp-=this.player2.attack/2,$("#player-1-health").text(this.player1.hp)):(this.player1.hp-=this.player2.attack,$("#player-1-health").text(this.player1.hp))}dead(){this.player1.hp<=0&&($(".winner-name").text("Farya:"),$(".loser-name").text("Wolyo...'"),$(".winner-name").delay(1800).fadeTo(2e3,1),$(".winner-quote").delay(2800).fadeTo(2e3,1),$(".loser-name").delay(3800).fadeTo(2e3,1),$(".reset").delay(5e3).fadeTo(1e3,1),setTimeout(()=>{$(".winner").addClass("drop")},1e3)),this.player2.hp<=0&&($(".winner-name").text("Wolyo:"),$(".loser-name").text("Farya...'"),$(".winner-name").delay(1800).fadeTo(2e3,1),$(".winner-quote").delay(2800).fadeTo(2e3,1),$(".loser-name").delay(3800).fadeTo(2e3,1),$(".reset").delay(5e3).fadeTo(1e3,1),setTimeout(()=>{$(".winner").addClass("drop")},1e3)),(this.player1.hp<=0||this.player2.hp<=0)&&this.deathAudio.play()}turn1(){this.dead(),$(".attack-1").prop("disabled",!0),$(".defend-1").prop("disabled",!0),$(".attack-2").prop("disabled",!1),$(".defend-2").prop("disabled",!1),$(".player-1").addClass("disabled"),$(".player-2").removeClass("disabled")}turn2(){this.dead(),$(".attack-2").prop("disabled",!0),$(".defend-2").prop("disabled",!0),$(".attack-1").prop("disabled",!1),$(".defend-1").prop("disabled",!1),$(".player-2").addClass("disabled"),$(".player-1").removeClass("disabled")}player1Spell1(){this.player2.hp-=this.player1.spell1-this.player2.armor,1==this.player2Defend&&(this.player2.hp-=this.player1.spell1/2-this.player2.armor/2),$("#player-2-health").text(this.player2.hp)}player1Spell2(){this.player2.hp-=this.player1.spell2-this.player2.armor,1==this.player2Defend&&(this.player2.hp-=this.player1.spell2/2-this.player2.armor/2),$("#player-2-health").text(this.player2.hp)}player1Spell3(){this.player1.armor+=this.player1.spell3,$("#player-1-armor").text(this.player1.armor)}player1Spell4(){this.player1.hp+=this.player1.spell4,$("#player-1-health").text(this.player1.hp),this.player2.hp-=this.player1.spell4,$("#player-2-health").text(this.player2.hp)}player2Spell1(){this.player1.hp-=this.player2.spell1-this.player1.armor,1==this.player1Defend&&(this.player1.hp-=this.player2.spell1/2-this.player1.armor/2),$("#player-1-health").text(this.player1.hp)}player2Spell2(){this.player1.hp-=this.player2.spell2-this.player1.armor,1==this.player1Defend&&(this.player1.hp-=this.player2.spell2/2-this.player1.armor/2),$("#player-1-health").text(this.player1.hp)}player2Spell3(){this.player2.armor+=this.player2.spell3,$("#player-2-armor").text(this.player2.armor)}player2Spell4(){this.player2.hp+=this.player2.spell4,$("#player-2-health").text(this.player2.hp),this.player1.hp-=this.player2.spell4,$("#player-1-health").text(this.player1.hp)}}s(1),s(59);const C=document.querySelector("#canvas"),E=document.querySelector("#cave");let I,T=!1,M=new class{constructor(e,t){let s;this.canvas=e,this.caveCanvas=t,this.caveC=t.getContext("2d"),this.c=e.getContext("2d"),this.map=new m(this.canvas),this.caves=[],this.playerImage,this.ticker=0,this.imgTicker=0,this.caveInitiated=!1,this.delCave=!1,this.battleInit=!1,this.mainAudio=new Audio("/src/assets/audio/oppressive-gloom-by-kevin-macleod.mp3"),this.caveAudio=new Audio("/src/assets/audio/darkling-by-kevin-macleod.mp3"),this.combatAudio=new Audio("/src/assets/audio/showdown-by-kevin-macleod.mp3"),this.player1Entered=!1,this.player2Entered=!1;const i=e=>{let t=e-s;(s=e)&&this.update(t),requestAnimationFrame(i)};i()}update(e){this.map.update(),this.draw(),this.genCave(),this.updateCave(e),this.exitCave(this.c),this.playerCombat(),0==this.ticker&&(0==this.ticker&&0==this.battleInit?(this.mainAudio.play(),this.mainAudio.volume=0,$(this.mainAudio).animate({volume:1},2e3),$(this.mainAudio).finish()):1==this.battleInit&&($(this.mainAudio).animate({volume:0},2e3),setTimeout(()=>{this.mainAudio.pause()},3e3)),this.caveAudio.pause())}draw(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),this.map.draw(this.c),this.caveC.clearRect(0,0,this.caveCanvas.width,this.caveCanvas.height),this.drawCave(this.caveC)}init(){this.map.genTrees(this.c),this.map.genRocks(this.c),this.map.genGrid(this.c),this.map.genCaves(this.c),this.map.genFlowers(this.c),this.update()}genCave(){this.genCavePlayer(),this.map.caves.forEach((e,t)=>{(this.map.player1.playerX>=e.x&&this.map.player1.playerX+this.map.player1.tileSize<=e.x+e.tileWidth&&this.map.player1.playerY==e.y||this.map.player2.playerX>=e.x&&this.map.player2.playerX+this.map.player2.tileSize<=e.x+e.tileWidth&&this.map.player2.playerY==e.y)&&(this.ticker++,this.delCave=t,1==this.ticker&&(setTimeout(()=>{this.mainAudio.pause()},1e3),this.caveAudio.play(),this.caveAudio.volume=0,$(this.caveAudio).animate({volume:1},2e3),this.map.caves.splice(this.delCave,1),this.caves.push(new X(this.map.player1,this.map.player2,this.caveCanvas,this.playerImage)),this.caves.forEach(e=>{e.init(),this.caveInitiated=!0})))})}genCavePlayer(){this.map.caves.forEach(e=>{this.map.player1.playerX>=e.x&&this.map.player1.playerX+this.map.player1.tileSize<=e.x+e.tileWidth&&this.map.player1.playerY==e.y&&(this.playerImage="/src/assets/imgs/cave-player-1.png",this.player1Entered=!0,console.log(this.player2Entered)),this.map.player2.playerX>=e.x&&this.map.player2.playerX+this.map.player2.tileSize<=e.x+e.tileWidth&&this.map.player2.playerY==e.y&&(this.playerImage="/src/assets/imgs/cave-player-2.png",this.player2Entered=!0,console.log(this.player2Entered))})}drawCave(e){1==this.caveInitiated&&this.caves.forEach(t=>{t.draw(e)})}updateCave(){1==this.caveInitiated&&this.caves.forEach(e=>{e.update()})}exitCave(e){this.caves.forEach(e=>{1==e.quit&&($(".container").delay(4e3).fadeTo(2e3,1),$(".death").fadeTo(1e3,1),$(".cave-container").delay(3e3).fadeTo(2e3,0),$(".death").delay(3e3).fadeTo(2e3,0),this.caves.splice(e,1),this.ticker=0,this.caveInitiated=!1,this.delCave=!1)}),this.setPlayer()}setPlayer(){1==this.map.player1.turn()&&1==this.map.player2.turn()?this.getPlayer2Stats():0==this.map.player1.turn()&&1==this.map.player2.turn()?this.getPlayer1Stats():0==this.map.player1.turn()&&0==this.map.player2.turn()?this.getPlayer2Stats():1==this.map.player1.turn()&&0==this.map.player2.turn()&&this.getPlayer1Stats()}getPlayer1Stats(){this.caves.forEach(e=>{1==e.cavePlayer1.gotWand&&(this.imgTicker=0,$(".player-spell-1").remove(),$(".init-spell-1").remove()),this.imgTicker++,$("#player-1-attack").text(e.cavePlayer1.wand.attack),$("#player-1-wand").text(e.cavePlayer1.wand.name),$("#player-1-health").text(e.cavePlayer1.wand.health),$("#player-1-armor").text(e.cavePlayer1.wand.defense),1==this.imgTicker&&(console.log(this.player2Entered),console.log("yoyoyo"),1==this.player1Entered&&this.setWand1())})}getPlayer2Stats(){this.caves.forEach(e=>{1==e.cavePlayer1.gotWand&&(this.imgTicker=0,$(".player-spell-2").remove(),$(".init-spell-2").remove()),this.imgTicker++,$("#player-2-attack").text(e.cavePlayer1.wand.attack),$("#player-2-wand").text(e.cavePlayer1.wand.name),$("#player-2-health").text(e.cavePlayer1.wand.health),$("#player-2-armor").text(e.cavePlayer1.wand.defense),1==this.imgTicker&&1==this.player2Entered&&this.setWand2()})}playerCombat(){1==this.map.playerCombat&&(this.combatAudio.play(),this.playerCombatAnim(),this.battleInit=!0)}playerCombatAnim(){$(".player-fight").addClass("fight"),$(".container").delay(1500).animate({top:"1000"}),$(".player-1").delay(1500).animate({left:"530px"}),$(".player-2").delay(1500).animate({right:"530px"}),$(".player-1").addClass("rotate-right"),$(".player-2").addClass("rotate-left"),$(".player-1").delay(1500).animate({top:"-170px"},"fast"),$(".player-2").delay(1500).animate({bottom:"-170px"},"fast"),$(".player-info-1").addClass("scale-left"),$(".player-info-2").addClass("scale-right"),$(".player-secondary-1").addClass("secondary-1"),$(".player-secondary-2").addClass("secondary-2"),$(".actions-1").show(),$(".actions-2").show(),$(".actions-1").delay(4500).animate({opacity:"1"}),$(".actions-2").delay(4500).animate({opacity:"1"})}setWand1(){this.caves.forEach(e=>{1==e.cavePlayer1.gotWand&&($(".player-1-spell-1").prepend(`<img src='${e.cavePlayer1.wand.spells.first.img}' class='player-spell-1'/>`),$(".player-1-spell-2").prepend(`<img src='${e.cavePlayer1.wand.spells.second.img}' class='player-spell-1'/>`),$(".player-1-spell-3").prepend(`<img src='${e.cavePlayer1.wand.spells.third.img}' class='player-spell-1'/>`),$(".player-1-spell-4").prepend(`<img src='${e.cavePlayer1.wand.spells.fourth.img}' class='player-spell-1'/>`),$(".name-1-1").text(e.cavePlayer1.wand.spells.first.name),$(".name-1-2").text(e.cavePlayer1.wand.spells.second.name),$(".name-1-3").text(e.cavePlayer1.wand.spells.third.name),$(".name-1-4").text(e.cavePlayer1.wand.spells.fourth.name),$(".tooltip-1-1").text(e.cavePlayer1.wand.spells.first.desc),$(".tooltip-1-2").text(e.cavePlayer1.wand.spells.second.desc),$(".tooltip-1-3").text(e.cavePlayer1.wand.spells.third.desc),$(".tooltip-1-4").text(e.cavePlayer1.wand.spells.fourth.desc),$(".stat-1-1").text(e.cavePlayer1.wand.spells.first.dmg),$(".stat-1-2").text(e.cavePlayer1.wand.spells.second.dmg),$(".stat-1-3").text(e.cavePlayer1.wand.spells.third.dmg),$(".stat-1-4").text(e.cavePlayer1.wand.spells.fourth.dmg))})}setWand2(){console.log("fired"),this.caves.forEach(e=>{1==e.cavePlayer1.gotWand&&($(".player-2-spell-1").prepend(`<img src='${e.cavePlayer1.wand.spells.first.img}' class='player-spell-2'/>`),$(".player-2-spell-2").prepend(`<img src='${e.cavePlayer1.wand.spells.second.img}' class='player-spell-2'/>`),$(".player-2-spell-3").prepend(`<img src='${e.cavePlayer1.wand.spells.third.img}' class='player-spell-2'/>`),$(".player-2-spell-4").prepend(`<img src='${e.cavePlayer1.wand.spells.fourth.img}' class='player-spell-2'/>`),$(".name-2-1").text(e.cavePlayer1.wand.spells.first.name),$(".name-2-2").text(e.cavePlayer1.wand.spells.second.name),$(".name-2-3").text(e.cavePlayer1.wand.spells.third.name),$(".name-2-4").text(e.cavePlayer1.wand.spells.fourth.name),$(".tooltip-2-1").text(e.cavePlayer1.wand.spells.first.desc),$(".tooltip-2-2").text(e.cavePlayer1.wand.spells.second.desc),$(".tooltip-2-3").text(e.cavePlayer1.wand.spells.third.desc),$(".tooltip-2-4").text(e.cavePlayer1.wand.spells.fourth.desc),$(".stat-2-1").text(e.cavePlayer1.wand.spells.first.dmg),$(".stat-2-2").text(e.cavePlayer1.wand.spells.second.dmg),$(".stat-2-3").text(e.cavePlayer1.wand.spells.third.dmg),$(".stat-2-4").text(e.cavePlayer1.wand.spells.fourth.dmg))})}}(C,E);M.init();let A=setInterval(()=>{1==M.battleInit&&(I=new W,T=!0)},1);setInterval(()=>{1==T&&(clearInterval(A),(I.player1.hp<=0||I.player2.hp<=0)&&setTimeout(()=>{$(M.combatAudio).animate({volume:0},2e3)},1e3))},1),$(".attack-1").click(()=>{I.player1Attack(),I.player1Defend=!1,I.turn1()}),$(".attack-2").click(()=>{I.player2Attack(),I.player2Defend=!1,I.turn2()}),$(".defend-1").click(()=>{I.player1Defend=!0,I.turn1()}),$(".defend-2").click(()=>{I.player2Defend=!0,I.turn2()}),$(".player-1-spell-1").click(()=>{$(".player-1-spell-1").addClass("disabled"),I.player1Spell1(),I.turn1()}),$(".player-1-spell-2").click(()=>{$(".player-1-spell-2").addClass("disabled"),I.player1Spell2(),I.turn1()}),$(".player-1-spell-3").click(()=>{$(".player-1-spell-3").addClass("disabled"),I.player1Spell3(),I.turn1()}),$(".player-1-spell-4").click(()=>{$(".player-1-spell-4").addClass("disabled"),I.player1Spell4(),I.turn1()}),$(".player-2-spell-1").click(()=>{$(".player-2-spell-1").addClass("disabled"),I.player2Spell1(),I.turn2()}),$(".player-2-spell-2").click(()=>{$(".player-2-spell-2").addClass("disabled"),I.player2Spell2(),I.turn2()}),$(".player-2-spell-3").click(()=>{$(".player-2-spell-3").addClass("disabled"),I.player2Spell3(),I.turn2()}),$(".player-2-spell-4").click(()=>{$(".player-2-spell-4").addClass("disabled"),I.player2Spell4(),I.turn2()}),$("#reset").click(()=>{document.location.reload(!0)}),$(".start").click(()=>{$(".menu").addClass("slide-up")}),setTimeout(()=>{M.mainAudio.addEventListener("ended",function(){M.mainAudio.play()})},192e3),setTimeout(()=>{M.caveAudio.addEventListener("ended",function(){M.caveAudio.play()})},15e4),setTimeout(()=>{M.combatAudio.addEventListener("ended",function(){M.combatAudio.play()})},67800)}]);